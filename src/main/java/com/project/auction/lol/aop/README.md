

- AOP란 Aspect Oriented Programming의 약자로 여러 객체에 공통으로 적용할 수 있는 기능을 구분함으로써
재사용성을 높여주는 프로그래밍 기법이다. AOP는 핵심기능과 공통기능의 구현을 분리함으로써 핵심기능을 구현한 코드의
수정없이 공통기능을 적요할 수 있게 만들어준다. 
  - Advice : 언제 공통관심기능을 핵심로직에 적용할지를 정의한다. (Around, Before,,)
    - Around는 proceed 호출 전 후로 구분
  - JoinPoint : Advice를 적용가능한 지점을 의미한다. (포인트컷의 후보 )
  - PointCut : JoinPoint의 부분집합으로서ㅏ 실제로 Advice가 적용되는 Joinpoint를 나타낸다.
  - Aspect : 여러 객체에 공통으로 적용되는기술을 Aspect라고 한다.
  - Weaving : 포인트컷으로 지정한 핵심 비즈니스 로직을 가진 메서드가 호출될 때, 어드바이스에 해당하는 공통기능의 메소드가 삽입되는 과정
    위빙을 통해 공통기능과 핵심 기능을 가진 새로운 프록시를 생성 

### Proxy
타겟을 감싸서 요청을 대신 받아주는 래핑클래스
Spring에서는 Proxy를 이용하여 OCP를 적용한다.   

### AOP란
```
로깅, 예외, 트랜잭션 처리 같은 코드들은 횡단 관심, 핵심 비즈니스로직은 핵심 관심사   
핵심 관심과 횡단 관심을 완벽하게 분리할 수 없는 OOP의 한계를 극복하도록 도와줌
```


### 동작 원리
- 프록시를 이용하여 구현

프록시는 타겟을 감싸서 타겟의 요청을 대신 받아주는 래핑오브젝트이다.   
호출자에서 타겟을 호출하게되면 타겟이 아닌 타겟을 감싸고있는 프록시가 호출되어 타겟 메소드 실행 전에 선철, 타겟 메서드 실행 후 후처리를 실행시키도록 구성된다.   
스프링 AOP에서는 런타임시에 Weaving을 통해 프록시 객체 생성  
- 생성 방식
  - JDK Dynamic Proxy : 타겟 대상이 interface를 구현하는 클래스면 인터페이스를 기반으로 프록시 객체를 생성하기 때문에 인터페이스에 정의되지 않는 메서드에 대해서는 AOP적용이 안되는 단점이 있다. 
  - CGLIB : 타겟대상이 인터페이스를 구현하지 않고 있고 바로 클래스를 사용한다면, 스프링은 CGLIB를 이용하여 클래스에 대한 프록시 객체를 생성.  대상 클래스를 상속받아 구현하므로 final인경우 프록시 생성 불가 

private으로 선언한 메소드에서 AOP 기능들(ex transactional)이 적용안되는 이유도 프록시객체가 외부에서 접근하지 못하기 때문인 것 같다(상속 불가능 등 )


- 출처
  - https://sa1341.github.io/2019/05/25/%EC%8A%A4%ED%94%84%EB%A7%81-AOP-%EA%B0%9C%EB%85%90-%EB%B0%8F-Proxy%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B5%AC%EB%8F%99%EC%9B%90%EB%A6%AC/